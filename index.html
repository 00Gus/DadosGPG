<!DOCTYPE html>
<html lang="es" class="light">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üé≤ Simulaciones de Dados ‚Äì Uniforme & Bernoulli</title>

  <!-- ============================
       Librer√≠as Externas (CDN)
  ============================ -->
  <!-- Chart.js para gr√°ficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Lottie para animaci√≥n en cabecera -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <!-- ============================
       Hojas de Estilo
  ============================ -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ============================
       HEADER CON ANIMACI√ìN LOTTIE
  ============================ -->
  <header>
    <div class="header-content">
      <lottie-player
        src="https://assets10.lottiefiles.com/packages/lf20_il2ppmx6.json"
        background="transparent"
        speed="1"
        style="width: 80px; height: 80px;"
        loop
        autoplay
      ></lottie-player>
      <h1>Simulaciones de Dados</h1>
      <p>Distribuci√≥n Uniforme &mdash; Distribuci√≥n de Bernoulli</p>
    </div>
    <!-- Toggle Modo Claro/Oscuro -->
    <div class="toggle-theme" id="toggle-theme" title="Cambiar tema claro/oscuro">
      üåô
    </div>
  </header>

  <main>
    <!-- ============================
         CONTROLES GENERALES (ajustes globales)
    ============================ -->
    <section id="controles-globales" class="card">
      <h2>‚öôÔ∏è Configuraci√≥n General</h2>
      <div class="subcard">
        <!-- N√∫mero de simulaciones por batch -->
        <label for="input-num-simulaciones">N√∫mero de simulaciones por clic:</label>
        <input type="number" id="input-num-simulaciones" min="1" max="1000" value="1"/>

        <!-- N√∫mero de caras del dado -->
        <label for="input-num-caras">N√∫mero de caras del dado:</label>
        <input type="number" id="input-num-caras" min="2" max="20" value="6"/>

        <!-- Velocidad de animaci√≥n -->
        <label for="slider-velocidad">Velocidad de animaci√≥n:</label>
        <input type="range" id="slider-velocidad" min="0.2" max="2" step="0.1" value="1"/>
        <span id="label-velocidad">1√ó</span>

        <!-- Bot√≥n de Reset -->
        <button id="btn-reset" class="btn-warning" title="Reiniciar todo (frecuencias, logros y contadores)">üîÑ Reset General</button>
      </div>
    </section>

    <!-- ============================
         DISTRIBUCI√ìN UNIFORME (UN DADO)
    ============================ -->
    <section id="uniforme-section" class="card">
      <h2>üé≤ Uniforme (1 dado)</h2>
      <div class="subcard">
        <!-- Tarjeta informativa (tooltip) -->
        <div class="info-box">
          <span class="info-icon" title="En la distribuci√≥n uniforme, cada cara del dado tiene probabilidad igual.">
            ‚ÑπÔ∏è
          </span>
          <p>Simula un dado con <span id="label-caras-uniforme">6</span> caras.</p>
        </div>

        <!-- Visual del dado (3D si 6 caras, si no: n√∫mero grande) -->
        <div class="dice-container">
          <div id="cube-uniforme" class="cube" data-caras="6">
            <div class="face front">1</div>
            <div class="face back">6</div>
            <div class="face right">2</div>
            <div class="face left">5</div>
            <div class="face top">3</div>
            <div class="face bottom">4</div>
          </div>
          <div id="numero-uniforme" class="numero-large" style="display:none;">1</div>
        </div>

        <!-- Bot√≥n para lanzar -->
        <button id="btn-lanzar-uniforme" class="btn" title="Lanza el dado las veces que indiquen los controles">Lanzar Uniforme</button>

        <!-- Texto con resultado individual y estad√≠sticas -->
        <p id="uniforme-resultado" class="resultado-text">‚Äî</p>
        <div id="stats-uniforme" class="stats-box">
          <p>Total tiradas: <span id="count-uniforme">0</span></p>
          <p>Media: <span id="mean-uniforme">0</span></p>
          <p>Mediana: <span id="median-uniforme">0</span></p>
          <p>Moda: <span id="mode-uniforme">‚Äî</span></p>
          <p>Varianza: <span id="var-uniforme">0</span></p>
          <p>Desv. est√°ndar: <span id="std-uniforme">0</span></p>
        </div>

        <!-- Histograma uniforme -->
        <div class="histogram-wrapper">
          <h3>Histograma de frecuencias</h3>
          <canvas id="chart-uniforme" width="400" height="200"></canvas>
        </div>

        <!-- Gr√°fica de media m√≥vil -->
        <div class="histogram-wrapper">
          <h3>Media m√≥vil (√∫ltimas 20 tiradas)</h3>
          <canvas id="chart-moving-average" width="400" height="200"></canvas>
        </div>

        <!-- Gr√°fica de distrib. acumulada -->
        <div class="histogram-wrapper">
          <h3>Distribuci√≥n acumulada</h3>
          <canvas id="chart-cumulative" width="400" height="200"></canvas>
        </div>

        <!-- Comparaci√≥n te√≥rica vs emp√≠rica -->
        <div class="histogram-wrapper">
          <h3>Te√≥rica vs Emp√≠rica</h3>
          <canvas id="chart-theoretical-vs-empirical" width="400" height="200"></canvas>
        </div>

        <!-- Exportar CSV -->
        <button id="btn-export-uniforme" class="btn-export" title="Descarga un CSV con todas las tiradas">üì• Exportar CSV</button>
      </div>
    </section>

    <!-- ============================
         DISTRIBUCI√ìN DE BERNOULLI (DOS DADOS)
    ============================ -->
    <section id="bernoulli-section" class="card">
      <h2>üé≤ Bernoulli (2 dados)</h2>
      <div class="subcard">
        <!-- Tarjeta informativa (tooltip) -->
        <div class="info-box">
          <span class="info-icon" title="Define √©xito: la suma de los dos dados cumple la condici√≥n seleccionada.">
            ‚ÑπÔ∏è
          </span>
          <p>Condici√≥n de √âxito: <span id="label-criterio">Suma ‚â•</span>
            <input type="number" id="input-criterio" min="2" max="40" value="9" style="width:60px;"/> 
          </p>
        </div>

        <!-- Visual de los dos dados -->
        <div class="dice-container">
          <div id="cube1-bernoulli" class="cube" data-caras="6">
            <div class="face front">1</div>
            <div class="face back">6</div>
            <div class="face right">2</div>
            <div class="face left">5</div>
            <div class="face top">3</div>
            <div class="face bottom">4</div>
          </div>
          <div id="cube2-bernoulli" class="cube" data-caras="6">
            <div class="face front">1</div>
            <div class="face back">6</div>
            <div class="face right">2</div>
            <div class="face left">5</div>
            <div class="face top">3</div>
            <div class="face bottom">4</div>
          </div>
          <!-- Si el usuario elige caras ‚â† 6, se ver√° un n√∫mero grande en su lugar -->
          <div id="numero1-bernoulli" class="numero-large" style="display:none;">1</div>
          <div id="numero2-bernoulli" class="numero-large" style="display:none;">1</div>
        </div>

        <!-- Bot√≥n para lanzar -->
        <button id="btn-lanzar-bernoulli" class="btn" title="Lanza los dos dados las veces que indiquen los controles">Lanzar Bernoulli</button>

        <!-- Texto con resultado individual y estad√≠sticas -->
        <p id="bernoulli-resultado" class="resultado-text">‚Äî</p>
        <div id="stats-bernoulli" class="stats-box">
          <p>Total tiradas: <span id="count-bernoulli">0</span></p>
          <p>√âxitos: <span id="count-exitos">0</span></p>
          <p>Fracaso: <span id="count-fracasos">0</span></p>
          <p>Media (suma): <span id="mean-bernoulli">0</span></p>
          <p>Varianza (suma): <span id="var-bernoulli">0</span></p>
          <p>Desv. est√°ndar (suma): <span id="std-bernoulli">0</span></p>
        </div>

        <!-- Histograma Bernoulli -->
        <div class="histogram-wrapper">
          <h3>Histograma √âxitos / Fracasos</h3>
          <canvas id="chart-bernoulli" width="400" height="200"></canvas>
        </div>

        <!-- Gr√°fica Comparaci√≥n prob. te√≥rica vs emp√≠rica Bernoulli -->
        <div class="histogram-wrapper">
          <h3>Probabilidad Te√≥rica vs Emp√≠rica</h3>
          <canvas id="chart-bern-theoretical-vs-empirical" width="400" height="200"></canvas>
        </div>

        <!-- Exportar CSV Bernoulli -->
        <button id="btn-export-bernoulli" class="btn-export" title="Descarga un CSV con todas las tiradas de Bernoulli">üì• Exportar CSV</button>
      </div>
    </section>
  </main>

  <!-- ============================
       FOOTER
  ============================ -->
  <footer>
    <p>¬© 2025 Gustavo P√©rez Gardu√±o ‚Äì Simulaciones de Probabilidad y Estad√≠stica</p>
  </footer>

  <!-- ============================
       Script principal
  ============================ -->
  <script src="script.js"></script>
</body>
</html>
